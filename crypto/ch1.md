Chapter 1.
군대 내 모든 좀비 데이터베이스 유지
좀비 생성 함수
좀비 랜덤, 독특한 외모
(공격 능력)

DNA = 16자리 integer
first 2 digit = head type
second 2 digit = eyes type

struct: object 같이 사용
struct Person {
	uint age;
	string name;
}

array
uint[2] fixedArray;  // 2개의 숫자
string[5] stringArray:  // 5개의 string 저장
uint[] dynamicArray;  // can increase infinitely
Person[] public people;  // Person이라는 struct를 item으로한 people이라는 array

function
function eatHumburgers(string _name, uint _amount) {
}  // parameter는 _를 앞에 붙임

eatHamburgers(“harry”, 2);

Create struct
Person satoshi = Person(172, “Satoshi”);  // create satoshi struct
people.push(satoshi);  // push satoshi into people array that only takes Person struct
or
people.push(Person(29, “Harry”));

private/public function
public: anybody or any contract can call function
private: contract 안의 다른 function들만 실행가능, _로 시작
uint[] numbers;
function _addToArray(uint _number) private {
	numbers.push(_number);
}

function return
string greeting = “Hello world”;
function sayHello() public returns (string) {
	return greeting;
}

function modifier
view: does not modify data
function sayHello() public view returns (string) {
pure: doesn’t modify outside data
function _multiply (uint a, uint b) private pure returns (uint) {
	return a * b;
}

Kekkak256: SHA3 hash function that maps string into random 256bit 16digit number
kekkak256(“aaaab”);  // 6e91ec6b….
kekkak256(“aaaac”);  // b1f078126…. 
typecasting: transform type, 형 변환
uint8 a = 5;
uint b = 6;
uint8 c = a * b;  // result error
uint8 c = a * uint8(b);  // good!

event: 1. declare event, 2. listen to event, 3. emit event
event IntegersAdded(uint x, uint y, uint result);
function add(uint _x, uint _y) public {
	uint result = _x + _y;
	IntegersAdded(_x, _y, result);
	return result;
}

// javascript that listens event
YourContract.IntegersAdded(function(error, result)) {
}

web3.js
const abi = // abi generated by the compiler
const ZombieFactoryContract = web3.eth.contract(abi)
const contractAddress = // our contract address on Ethereum after deploying
const ZombieFactory = ZombieFactoryContract.at(contractAddress)
// ‘ZombieFactory’는 contract 의 public function과 event를 사용 가능

// listen event
$(“#myButton”).click(e => { 	const name = $(“#nameInput”).val();
	ZombieFactory.createRandomZombie(name); // call createRandomZombie function in contract
})

// update interface when NewZombie event occur
var event = ZombieFactory.NewZombie(function(err, result)) {
	if (error) return
	generateZombie(result.zombieId, result.name, result.dna);
}

// take DNA value and update image
function generateZombie(id, name, dan) { 	let dnaStr = String(dna);
	while (dnaStr.length < 16)
		dnaStr = “0” + dnaStr
	let zombieDetails = {
		headChoice: dnaStr.substring(0, 2) % 7 + 1,
		// 두번째 2자리는 눈 모양을 결정한다. 눈 모양에는 11가지가 있다:
		eyeChoice: dnaStr.substring(2, 4) % 11 + 1,
		// 셔츠 타입에는 6가지가 있다:
		shirtChoice: dnaStr.substring(4, 6) % 6 + 1,
		// 마지막 6자리는 색깔을 결정하며, 360도(degree)까지 지원하는 CSS의 "filter: hue-rotate"를 이용하여 아래와 같이 업데이트된다:
		skinColorChoice: parseInt(dnaStr.substring(6, 8) / 100 * 360),
		eyeColorChoice: parseInt(dnaStr.substring(8, 10) / 100 * 360),
		clothesColorChoice: parseInt(dnaStr.substring(10, 12) / 100 * 360),
		zombieName: name,
		zombieDescription: "A Level 1 CryptoZombie",
	};
	return zombieDetails;
}